# UNIX Processus

---

* Question 1.1  
    Write a program that create two processes, define a global variable, edit it in two different ways by both child and parent processes in a loop and display information following below pattern.  

    Output pattern :
    >   \*\*Start of the program, global_value=XXX\*\*  
        \*\*Start of a new process\*\*  
        [type] PID=XXX, PPID=XXX, global_value=XXX  
        \*\*Edit of global variable\*\*  
        [type] \<XXX\> : i=XXX, global_value=XXX  
        At the end of process :  
        **End of process \<XXX\>, global_value=XXX**

    Actual output of [commit]() :
    >   Here is the output

* Redo it with threads

    Output of [commit]() :
    > Here is the output

* What is the difference ? Explain the reason.

    The difference is that process don't share the same context so each process have its own memory space. Threads are sharing the same memory space but each threads have its own registers and stack. Basically it mean that using thread the global variable will be the same for every threads so it will be edited by every thread whereas it would be one global variable per process using processes so process doesn't interfer between each other.

* Question 1.2
    What if you take off '\n' ?

    Output of [commit]() :
    > Here is the output.

    Output are done after prompt take back control over the terminal so we can already see that it is waiting for other control from the user even if all process and thread still not complete because our main process is done.

* Give a solution  
    A solution would be to wait for the end of each child processes and threads before closing parent process.

    Output of [commit]() :
    > Here is the output.

* Question 1.3
    What is the meaning of the value that fork() primitiv return ?

    If fork() give us a 0, it mean we are in XXX process, otherwise it is the value of the XXX of XXX process.

* What is the meaning of parent's PPID displayed in the program ?  
    It correspond to the terminal PID because it is where we launch our program. We can check it by running two command in the terminal, we should get the same PPID.

* Question 1.4
    Put constant waiting times in each loop.

    Output of [commit]() :
    > Here is the output

* Does v_global change ?
    As we say before, using process v_global should not change because each processes have its own memory space. Otherwise, using threads v_global should be the same for each thread and the edit done by any threads on it should be visible by any other threads.

* Question 1.5
    Do previous question using random waiting times and display them. Every process should have the same random waiting time.

    Output of [commit]() :
    > Here is the output

* How do you make these waiting times different between processes ?
    You need to call random function after calling fork not before because each process will then call random by its own and generating differents values. If you dont, when calling fork process will copy the current context and paste it in its own memory space. Basically, each process will paste the same random value which was already generated in its own memory space and so every processes will have the same value.

    Output of [commit]() :
    > Here is the output

* What happen on the global running program ?

* Question 2.1
    Write a program that create two processes, display PID and PPID of parent and child process.
    Make the child sleep, synchronize parent process on child wake up and display information like the below pattern :
    >   \*\*Start of the program\*\*  
        \*\*Start of a new process\*\*  
        [type] PID=XXX, PPID=XXX  
        [child] I'm sleeping for XXXs...  
        [child] I'm awake !
        [parent] Waiting for my child...
        **End of process \<XXX\>**
        **End of process \<XXX\>**

* Question 2.2
    Take back previous code, add a system call that allow to switch child's code by `echo` command's code with "HELLO" as parameter and a name written by user.

* What can you see on the code after the system call ?

* Question 2.3
    Write a progam "child_prog" that will display the following pattern :
    >   [child] PID \<XXX\> PPID \<XXX\>  
        [child] running command : ./child_prog  
        [child] Bonjour saymyname  

* Question 2.4
    Edit question 2.1 so the child launch "child_prog" instead of echo.

* Question 2.5
    Retry previous programs using system's call execlp() instead of execl().

    Output of [commit]() :
    > Here is the output

* What happened ?

* Add a system call allowing to easily catch the error.

* What should we do to fix it ?

* Question 2.6
    Take back question 2.2 by creating a set of child processes. The exact number of processes will be given by the user. Parent process will wake up when all child processes are finish.

---

[Preview](../README.md)

[Next]
